local hud {
    voiceLevel = 3,
    sniper = false,

    WEAPON_LIST = {
    -- Misc
    { WEAPON_HASH = '-1569615261', IMAGE_NAME = '' }, -- unarmed--
    -- Pistols
    { WEAPON_HASH = `weapon_pistol`, IMAGE_NAME = 'weapon_pistol.png' },--
    { WEAPON_HASH = `weapon_sp45`, IMAGE_NAME = 'weapon_sp45.png' },--
    { WEAPON_HASH = `weapon_pistol_mk2`, IMAGE_NAME = 'weapon_pistol_mk2.png' },--
    { WEAPON_HASH = `weapon_snspistol`, IMAGE_NAME = 'weapon_snspistol.png' },--
    { WEAPON_HASH = `weapon_snspistol_mk2`, IMAGE_NAME = 'weapon_snspistol_mk2.png' },
    { WEAPON_HASH = `weapon_heavypistol`, IMAGE_NAME = 'weapon_heavypistol.png' },--
    { WEAPON_HASH = `weapon_combatpistol`, IMAGE_NAME = 'weapon_combatpistol.png' },--
    { WEAPON_HASH = `weapon_appistol`, IMAGE_NAME = 'weapon_appistol.png' },--
    { WEAPON_HASH = `weapon_pistol50`, IMAGE_NAME = 'weapon_pistol50.png' },--
    { WEAPON_HASH = `weapon_revolver`, IMAGE_NAME = 'weapon_revolver.png' },--
    { WEAPON_HASH = `weapon_revolver_mk2`, IMAGE_NAME = 'weapon_revolver_mk2.png' },--
    { WEAPON_HASH = `weapon_ceramicpistol`, IMAGE_NAME = 'weapon_ceramicpistol.png' },--
    { WEAPON_HASH = `weapon_revolver_mk2`, IMAGE_NAME = 'weapon_revolver_mk2.png' },--
    { WEAPON_HASH = `weapon_glock18c`, IMAGE_NAME = 'weapon_glock18c.png' },--
    -- Rifles
    { WEAPON_HASH = `weapon_carbinerifle_mk2`, IMAGE_NAME = 'weapon_carbinerifle_mk2.png' },--
    { WEAPON_HASH = `weapon_carbinerifle`, IMAGE_NAME = 'weapon_carbinerifle.png' },--
    { WEAPON_HASH = `weapon_tacticalrifle`, IMAGE_NAME = 'weapon_tacticalrifle.png' },--
    { WEAPON_HASH = `weapon_mk18`, IMAGE_NAME = 'weapon_mk18.png' },--
    { WEAPON_HASH = `weapon_assaultrifle`, IMAGE_NAME = 'weapon_assaultrifle.png' },--
    { WEAPON_HASH = `weapon_heavyrifle`, IMAGE_NAME = 'weapon_heavyrifle.png' },--
    { WEAPON_HASH = `weapon_specialcarbine`, IMAGE_NAME = 'weapon_specialcarbine.png' },--
    -- Smgs
    { WEAPON_HASH = `weapon_microsmg`, IMAGE_NAME = 'weapon_microsmg.png' },--
    { WEAPON_HASH = `weapon_mpx`, IMAGE_NAME = 'weapon_mpx.png' },--
    -- Heavy weapons

  },

    UnarmedHash = `WEAPON_UNARMED`,

StatusThread = function(self)

    CreateThread(function()
      
    while true do

    Wait(250)

        local weaponImage = self:GetHudWeapon()
        local pedWeapon = weaponImage ~= "" and GetSelectedPedWeapon(PlayerPedId()) or false;
        local weaponMaxAmmo = pedWeapon and GetAmmoInPedWeapon(self.plyPed, pedWeapon) or 0;
        local a, weaponClipAmmo = GetAmmoInClip(self.plyPed, pedWeapon);

            isTalking = NetworkIsPlayerTalking(self.PlayerId),
            voiceLevel = self.voiceLevel,
            radioActive = self.radioActive,
            hunger = math.ceil(localState.hungerLevel / 100),
            thirst = math.ceil(localState.thirstLevel  / 100),
            stress = math.ceil(localState.stressLevel / 100),
            isBleeding = exports['mythic_hospital']:BloodLevel() > 0,
            isLimp = exports['mythic_hospital']:IsInjuryCausingLimp(),
            weapon = self.MovingHud and 'advancedrifle.png' or weaponImage,
            maxAmmo = weaponMaxAmmo - weaponClipAmmo,
            clipAmmo = weaponClipAmmo,
            oxygen = GetPlayerUnderwaterTimeRemaining(self.PlayerId) * 10

        end)
    end,

    GetHudWeapon = function(self)
    
    local PED_WEAPON_HASH = GetSelectedPedWeapon(PlayerPedId())

    for index, data in ipairs(self.WEAPON_LIST) do

        if(tonumber(data.WEAPON_HASH) == PED_WEAPON_HASH) then 

            return data.IMAGE_NAME
        end
      end
    end,

  HarnessVehicles = {},

    DrawBars = function(self)

    if self.blackbars then
      DrawRect(0.0, 0.0, 2.0, 0.13, 0, 0, 0, 255)
      DrawRect(0.0, 1.0, 2.0, 0.13, 0, 0, 0, 255)
    end

  end,

  HideAmmo = function(self)
    while true do
      Wait(0)
      if not self.sniper then
				HideHudComponentThisFrame(14) 
			end
      DisplayAmmoThisFrame(false)
      self:DrawBars()
    end
  end,

  UpdateHarnessVehicles = function(self, data)
    self.HarnessVehicles = data;
  end,

    ItemCheck = function(self)

    if not self.compassActive then return end;
    local hasCompass = exports['drp-inventory']:hasEnoughOfItem('compass', 1)
    self:Compass(hasCompass)

  end,
}

CreateThread(function()
  HUD:HideAmmo()
end)

exports("IsHarness", function(targetVeh)
  return HUD.HarnessVehicles[VehToNet(targetVeh)] or false;
end) -- exports['drp-hud']:IsHarness(vehicle)

exports('itemCheck', function()
  return HUD:ItemCheck()
end)

RegisterCommand("togglehud", function(source, args, rawCommand) HUD:ToggleNui(not HUD.isOpen) end, false)

RegisterCommand("blackbars", function(source, args, rawCommand) 
  HUD.blackbars = not HUD.blackbars 
  TriggerEvent('chat:toggleChat', HUD.blackbars)
end, false)

RegisterCommand("carhud", function(source, args, rawCommand) 
  HUD:MoveCarHud(args[1])
end, false)

TriggerEvent('chat:addSuggestion', '/carhud', 'Toggle the health and driving HUD.', {
  { name="center/right", help="This will move the Car HUD to the center/right."},
})

TriggerEvent('chat:addSuggestion', '/togglehud', 'Toggle the health and driving HUD.')
TriggerEvent('chat:addSuggestion', '/blackbars', 'Toggle blackbars, will also disable chat.')

AddEventHandler("harness", function(toggle)

  local plyVehicle = GetVehiclePedIsIn(PlayerPedId(), false)
  if not plyVehicle or not toggle then return end;
  TriggerServerEvent('harness', VehToNet(plyVehicle))

end)

RegisterNetEvent("newHarness", function(newData) HUD:UpdateHarnessVehicles(newData) end)

RegisterNetEvent('pma-voice:radioActive', function(talking)
  HUD.radioActive = talking
end)

AddEventHandler('drp-progressbar:visible', function(toggle)
  HUD.carControls = toggle
end)

AddEventHandler('onResourceStart', function(resourceName)
  if resourceName == 'drp-inventory' then
    HUD.inventoryActive = true;
  end;
end)

AddEventHandler('onResourceStop', function(resourceName)
  if resourceName == 'drp-inventory' then
    HUD.inventoryActive = true;
  end;
end)

AddEventHandler('drp-hud:toggleLandHud', function(sentToggle)
  HUD:Compass(sentToggle)
end)

AddEventHandler('drp-hud:togglesniper', function(sniper)
  HUD.sniper = sniper
end)

          --fuel = fuel,

        --local fuel = GetVehicleFuelLevel(self.plyVehicle)
        --if fuel < 12 then self:CarFuelAlarm() end;